#****************************************************************************************************************************************************
#
# Copyright (C) 2001 - 2018 Selim Temizer.
#
# This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License
# as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
#
# This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
#
# You should have received a copy of the GNU Lesser General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.
#
#****************************************************************************************************************************************************




#**************************************************************** File Description ******************************************************************
# Author      : Selim Temizer, PhD
#               Middle East Technical University
#               Department of Computer Engineering
#               Temizer Mobility Research Laboratory
#----------------------------------------------------------------------------------------------------------------------------------------------------
# E_Mail      : temizer@metu.edu.tr
#----------------------------------------------------------------------------------------------------------------------------------------------------
# Created on  : Sunday - May 13, 2001
# Description : Professional Makefile Template
# Notes       : The user only needs to fill in the "Compiler - General" and the "Project specific" areas.
#               All other parts of this file use the information in these two areas and do not need to be modified.
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
# Compiler - General :
#----------------------------------------------------------------------------------------------------------------------------------------------------
CC         = gcc
CC_OPTS   += -Wall -ansi -pedantic-errors -O6 -g
DEFINES   +=
INC_DIRS  += -I.
LIB_DIRS  += -L.
LIBS      +=
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
# Project specific :
#----------------------------------------------------------------------------------------------------------------------------------------------------
HW1_HOME  = $(HOME)/Ceng140/Homework1

CC_OPTS  += -pg
DEFINES  += -DSELIM=true
INC_DIRS +=
LIB_DIRS +=
LIBS     += -lm
#----------------------------------------------------------------------------------------------------------------------------------------------------
# Source files to be compiled (any file extension is OK, object files will be created in the same directories as their source files) :

SRC_cpp = $(HW1_HOME)/Utilities.c \
	  $(HW1_HOME)/TicTacToe.c
#----------------------------------------------------------------------------------------------------------------------------------------------------
# Target executable name :

TARGET = ttt
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
# Sources and object files to be created :

SRCS = $(SRC_cpp)

tmp_dir    = $(dir $(SRCS))
tmp_file   = $(notdir $(SRCS))
tmp_base   = $(basename $(tmp_file))
tmp_base_o = $(addsuffix .o, $(tmp_base))

OBJS = $(join $(tmp_dir), $(tmp_base_o))

#----------------------------------------------------------------------------------------------------------------------------------------------------
# Profile name ( produced by "gprof" by the phony target "profile" ) :

PROFILE = $(TARGET).prof
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
.PHONY: all depend messages variables build strip profile clean cleanall
#----------------------------------------------------------------------------------------------------------------------------------------------------
all: messages  depend  build
#----------------------------------------------------------------------------------------------------------------------------------------------------
messages:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo "- Always make sure that the dependency file is up to date."
	@echo " "
	@echo "- To update dependency file, type        \"make depend\""
	@echo "- To see internal variable values, type  \"make variables\""
	@echo "- To compile and link, type              \"make build\""
	@echo "- To strip the executable, type          \"make strip\""
	@echo "- To create profile, type                \"make profile\""
	@echo "- To clean objects, type                 \"make clean\""
	@echo "- To clean objects and executable, type  \"make cleanall\""
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#----------------------------------------------------------------------------------------------------------------------------------------------------
variables:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo SRCS :
	@echo " "
	@echo $(SRCS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo OBJS :
	@echo " "
	@echo $(OBJS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo PROFILE :
	@echo " "
	@echo $(PROFILE)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#----------------------------------------------------------------------------------------------------------------------------------------------------
build: $(OBJS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Linking
	@echo " "
	$(CC) $(CC_OPTS) $(LIB_DIRS) -o $(TARGET) $(OBJS) $(LIBS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
.c.o:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Compiling $<
	@echo " "
	$(CC) -o $@ $(CC_OPTS) $(DEFINES) $(INC_DIRS) -c $<
#----------------------------------------------------------------------------------------------------------------------------------------------------
.C.o:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Compiling $<
	@echo " "
	$(CC) -o $@ $(CC_OPTS) $(DEFINES) $(INC_DIRS) -c $<
#----------------------------------------------------------------------------------------------------------------------------------------------------
.cpp.o:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Compiling $<
	@echo " "
	$(CC) -o $@ $(CC_OPTS) $(DEFINES) $(INC_DIRS) -c $<
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
strip:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	-strip $(TARGET)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#----------------------------------------------------------------------------------------------------------------------------------------------------
profile:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Creating profile
	@echo " "
	-gprof $(TARGET) gmon.out > $(PROFILE)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#----------------------------------------------------------------------------------------------------------------------------------------------------
clean:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Removing core, .depend, gmon.out, profile, objects
	@echo " "
	rm -f core .depend gmon.out $(PROFILE)
	@echo " "
	rm -f $(OBJS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#----------------------------------------------------------------------------------------------------------------------------------------------------
cleanall:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Removing core, .depend, gmon.out, profile, objects and executable
	@echo " "
	rm -f core .depend gmon.out $(PROFILE)
	@echo " "
	rm -f $(OBJS)
	@echo " "
	rm -f $(TARGET)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
#****************************************************************************************************************************************************




#****************************************************************************************************************************************************
include .depend
#----------------------------------------------------------------------------------------------------------------------------------------------------
.depend:
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	echo "#DUMMY DEPENDENCY FILE" > .depend
#----------------------------------------------------------------------------------------------------------------------------------------------------
depend:  $(SRCS)
	@echo " "
	@echo -----------------------------------------------------------------
	@echo " "
	@echo Updating dependencies file \".depend\"
	@echo " "
	$(CC) -M $(DEFINES) $(INC_DIRS) $(SRCS) > .depend
#****************************************************************************************************************************************************
